var An=Object.create;var Ae=Object.defineProperty;var Cn=Object.getOwnPropertyDescriptor;var In=Object.getOwnPropertyNames;var Sn=Object.getPrototypeOf,On=Object.prototype.hasOwnProperty;var A=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),Tn=(s,e)=>{for(var t in e)Ae(s,t,{get:e[t],enumerable:!0})},nt=(s,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of In(e))!On.call(s,r)&&r!==t&&Ae(s,r,{get:()=>e[r],enumerable:!(n=Cn(e,r))||n.enumerable});return s};var pe=(s,e,t)=>(t=s!=null?An(Sn(s)):{},nt(e||!s||!s.__esModule?Ae(t,"default",{value:s,enumerable:!0}):t,s)),qn=s=>nt(Ae({},"__esModule",{value:!0}),s);var Ke=A((ws,Ge)=>{"use strict";var me=typeof Reflect=="object"?Reflect:null,st=me&&typeof me.apply=="function"?me.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},Ce;me&&typeof me.ownKeys=="function"?Ce=me.ownKeys:Object.getOwnPropertySymbols?Ce=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Ce=function(e){return Object.getOwnPropertyNames(e)};function Fn(s){console&&console.warn&&console.warn(s)}var it=Number.isNaN||function(e){return e!==e};function _(){_.init.call(this)}Ge.exports=_;Ge.exports.once=Un;_.EventEmitter=_;_.prototype._events=void 0;_.prototype._eventsCount=0;_.prototype._maxListeners=void 0;var rt=10;function Ie(s){if(typeof s!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof s)}Object.defineProperty(_,"defaultMaxListeners",{enumerable:!0,get:function(){return rt},set:function(s){if(typeof s!="number"||s<0||it(s))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+s+".");rt=s}});_.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};_.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||it(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function ot(s){return s._maxListeners===void 0?_.defaultMaxListeners:s._maxListeners}_.prototype.getMaxListeners=function(){return ot(this)};_.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r=e==="error",i=this._events;if(i!==void 0)r=r&&i.error===void 0;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=i[e];if(u===void 0)return!1;if(typeof u=="function")st(u,this,t);else for(var l=u.length,m=dt(u,l),n=0;n<l;++n)st(m[n],this,t);return!0};function at(s,e,t,n){var r,i,o;if(Ie(t),i=s._events,i===void 0?(i=s._events=Object.create(null),s._eventsCount=0):(i.newListener!==void 0&&(s.emit("newListener",e,t.listener?t.listener:t),i=s._events),o=i[e]),o===void 0)o=i[e]=t,++s._eventsCount;else if(typeof o=="function"?o=i[e]=n?[t,o]:[o,t]:n?o.unshift(t):o.push(t),r=ot(s),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=s,a.type=e,a.count=o.length,Fn(a)}return s}_.prototype.addListener=function(e,t){return at(this,e,t,!1)};_.prototype.on=_.prototype.addListener;_.prototype.prependListener=function(e,t){return at(this,e,t,!0)};function Bn(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ut(s,e,t){var n={fired:!1,wrapFn:void 0,target:s,type:e,listener:t},r=Bn.bind(n);return r.listener=t,n.wrapFn=r,r}_.prototype.once=function(e,t){return Ie(t),this.on(e,ut(this,e,t)),this};_.prototype.prependOnceListener=function(e,t){return Ie(t),this.prependListener(e,ut(this,e,t)),this};_.prototype.removeListener=function(e,t){var n,r,i,o,a;if(Ie(t),r=this._events,r===void 0)return this;if(n=r[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;i===0?n.shift():Mn(n,i),n.length===1&&(r[e]=n[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};_.prototype.off=_.prototype.removeListener;_.prototype.removeAllListeners=function(e){var t,n,r;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var i=Object.keys(n),o;for(r=0;r<i.length;++r)o=i[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this};function ct(s,e,t){var n=s._events;if(n===void 0)return[];var r=n[e];return r===void 0?[]:typeof r=="function"?t?[r.listener||r]:[r]:t?jn(r):dt(r,r.length)}_.prototype.listeners=function(e){return ct(this,e,!0)};_.prototype.rawListeners=function(e){return ct(this,e,!1)};_.listenerCount=function(s,e){return typeof s.listenerCount=="function"?s.listenerCount(e):lt.call(s,e)};_.prototype.listenerCount=lt;function lt(s){var e=this._events;if(e!==void 0){var t=e[s];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}_.prototype.eventNames=function(){return this._eventsCount>0?Ce(this._events):[]};function dt(s,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=s[n];return t}function Mn(s,e){for(;e+1<s.length;e++)s[e]=s[e+1];s.pop()}function jn(s){for(var e=new Array(s.length),t=0;t<e.length;++t)e[t]=s[t].listener||s[t];return e}function Un(s,e){return new Promise(function(t,n){function r(o){s.removeListener(e,i),n(o)}function i(){typeof s.removeListener=="function"&&s.removeListener("error",r),t([].slice.call(arguments))}ht(s,e,i,{once:!0}),e!=="error"&&Vn(s,r,{once:!0})})}function Vn(s,e,t){typeof s.on=="function"&&ht(s,"error",e,t)}function ht(s,e,t,n){if(typeof s.on=="function")n.once?s.once(e,t):s.on(e,t);else if(typeof s.addEventListener=="function")s.addEventListener(e,function r(i){n.once&&s.removeEventListener(e,r),t(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof s)}});var Oe=A(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.Event=se.Response=se.Message=void 0;var Se=class{constructor(e){this.seq=0,this.type=e}};se.Message=Se;var ft=class extends Se{constructor(e,t){super("response");this.request_seq=e.seq,this.command=e.command,t?(this.success=!1,this.message=t):this.success=!0}};se.Response=ft;var pt=class extends Se{constructor(e,t){super("event");this.event=e,t&&(this.body=t)}};se.Event=pt});var gt=A(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.ProtocolServer=void 0;var Nn=Ke(),we=Oe(),mt=class{get event(){return this._event||(this._event=(e,t)=>{this._listener=e,this._this=t;let n;return n={dispose:()=>{this._listener=void 0,this._this=void 0}},n}),this._event}fire(e){if(this._listener)try{this._listener.call(this._this,e)}catch{}}hasListener(){return!!this._listener}dispose(){this._listener=void 0,this._this=void 0}},ge=class extends Nn.EventEmitter{constructor(){super();this._sendMessage=new mt,this._pendingRequests=new Map,this.onDidSendMessage=this._sendMessage.event}dispose(){}handleMessage(e){if(e.type==="request")this.dispatchRequest(e);else if(e.type==="response"){let t=e,n=this._pendingRequests.get(t.request_seq);n&&(this._pendingRequests.delete(t.request_seq),n(t))}}_isRunningInline(){return this._sendMessage&&this._sendMessage.hasListener()}start(e,t){this._sequence=1,this._writableStream=t,this._rawData=Buffer.alloc(0),e.on("data",n=>this._handleData(n)),e.on("close",()=>{this._emitEvent(new we.Event("close"))}),e.on("error",n=>{this._emitEvent(new we.Event("error","inStream error: "+(n&&n.message)))}),t.on("error",n=>{this._emitEvent(new we.Event("error","outStream error: "+(n&&n.message)))}),e.resume()}stop(){this._writableStream&&this._writableStream.end()}sendEvent(e){this._send("event",e)}sendResponse(e){e.seq>0?console.error(`attempt to send more than one response for command ${e.command}`):this._send("response",e)}sendRequest(e,t,n,r){let i={command:e};if(t&&Object.keys(t).length>0&&(i.arguments=t),this._send("request",i),r){this._pendingRequests.set(i.seq,r);let o=setTimeout(()=>{clearTimeout(o);let a=this._pendingRequests.get(i.seq);a&&(this._pendingRequests.delete(i.seq),a(new we.Response(i,"timeout")))},n)}}dispatchRequest(e){}_emitEvent(e){this.emit(e.event,e)}_send(e,t){if(t.type=e,t.seq=this._sequence++,this._writableStream){let n=JSON.stringify(t);this._writableStream.write(`Content-Length: ${Buffer.byteLength(n,"utf8")}\r
\r
${n}`,"utf8")}this._sendMessage.fire(t)}_handleData(e){for(this._rawData=Buffer.concat([this._rawData,e]);;){if(this._contentLength>=0){if(this._rawData.length>=this._contentLength){let t=this._rawData.toString("utf8",0,this._contentLength);if(this._rawData=this._rawData.slice(this._contentLength),this._contentLength=-1,t.length>0)try{let n=JSON.parse(t);this.handleMessage(n)}catch(n){this._emitEvent(new we.Event("error","Error handling data: "+(n&&n.message)))}continue}}else{let t=this._rawData.indexOf(ge.TWO_CRLF);if(t!==-1){let r=this._rawData.toString("utf8",0,t).split(`\r
`);for(let i=0;i<r.length;i++){let o=r[i].split(/: +/);o[0]=="Content-Length"&&(this._contentLength=+o[1])}this._rawData=this._rawData.slice(t+ge.TWO_CRLF.length);continue}}break}}};Te.ProtocolServer=ge;ge.TWO_CRLF=`\r
\r
`});var bt=A(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.runDebugAdapter=void 0;function $n(){}qe.runDebugAdapter=$n});var vt=A((be,ve)=>{(function(s){var e=typeof be=="object"&&be&&!be.nodeType&&be,t=typeof ve=="object"&&ve&&!ve.nodeType&&ve,n=typeof global=="object"&&global;(n.global===n||n.window===n||n.self===n)&&(s=n);var r,i=2147483647,o=36,a=1,u=26,l=38,m=700,d=72,R=128,y="-",k=/^xn--/,ie=/[^\x20-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,oe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=o-a,x=Math.floor,O=String.fromCharCode,T;function D(p){throw RangeError(oe[p])}function le(p,b){for(var E=p.length,P=[];E--;)P[E]=b(p[E]);return P}function z(p,b){var E=p.split("@"),P="";E.length>1&&(P=E[0]+"@",p=E[1]),p=p.replace(S,".");var L=p.split("."),F=le(L,b).join(".");return P+F}function B(p){for(var b=[],E=0,P=p.length,L,F;E<P;)L=p.charCodeAt(E++),L>=55296&&L<=56319&&E<P?(F=p.charCodeAt(E++),(F&64512)==56320?b.push(((L&1023)<<10)+(F&1023)+65536):(b.push(L),E--)):b.push(L);return b}function Y(p){return le(p,function(b){var E="";return b>65535&&(b-=65536,E+=O(b>>>10&1023|55296),b=56320|b&1023),E+=O(b),E}).join("")}function _e(p){return p-48<10?p-22:p-65<26?p-65:p-97<26?p-97:o}function De(p,b){return p+22+75*(p<26)-((b!=0)<<5)}function te(p,b,E){var P=0;for(p=E?x(p/m):p>>1,p+=x(p/b);p>g*u>>1;P+=o)p=x(p/g);return x(P+(g+1)*p/(p+l))}function de(p){var b=[],E=p.length,P,L=0,F=R,C=d,M,W,K,ee,q,U,H,ne,ae;for(M=p.lastIndexOf(y),M<0&&(M=0),W=0;W<M;++W)p.charCodeAt(W)>=128&&D("not-basic"),b.push(p.charCodeAt(W));for(K=M>0?M+1:0;K<E;){for(ee=L,q=1,U=o;K>=E&&D("invalid-input"),H=_e(p.charCodeAt(K++)),(H>=o||H>x((i-L)/q))&&D("overflow"),L+=H*q,ne=U<=C?a:U>=C+u?u:U-C,!(H<ne);U+=o)ae=o-ne,q>x(i/ae)&&D("overflow"),q*=ae;P=b.length+1,C=te(L-ee,P,ee==0),x(L/P)>i-F&&D("overflow"),F+=x(L/P),L%=P,b.splice(L++,0,F)}return Y(b)}function he(p){var b,E,P,L,F,C,M,W,K,ee,q,U=[],H,ne,ae,He;for(p=B(p),H=p.length,b=R,E=0,F=d,C=0;C<H;++C)q=p[C],q<128&&U.push(O(q));for(P=L=U.length,L&&U.push(y);P<H;){for(M=i,C=0;C<H;++C)q=p[C],q>=b&&q<M&&(M=q);for(ne=P+1,M-b>x((i-E)/ne)&&D("overflow"),E+=(M-b)*ne,b=M,C=0;C<H;++C)if(q=p[C],q<b&&++E>i&&D("overflow"),q==b){for(W=E,K=o;ee=K<=F?a:K>=F+u?u:K-F,!(W<ee);K+=o)He=W-ee,ae=o-ee,U.push(O(De(ee+He%ae,0))),W=x(He/ae);U.push(O(De(W,0))),F=te(E,ne,P==L),E=0,++P}++E,++b}return U.join("")}function fe(p){return z(p,function(b){return k.test(b)?de(b.slice(4).toLowerCase()):b})}function We(p){return z(p,function(b){return ie.test(b)?"xn--"+he(b):b})}if(r={version:"1.3.2",ucs2:{decode:B,encode:Y},decode:de,encode:he,toASCII:We,toUnicode:fe},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return r});else if(e&&t)if(ve.exports==e)t.exports=r;else for(T in r)r.hasOwnProperty(T)&&(e[T]=r[T]);else s.punycode=r})(be)});var Rt=A((Ds,yt)=>{"use strict";yt.exports={isString:function(s){return typeof s=="string"},isObject:function(s){return typeof s=="object"&&s!==null},isNull:function(s){return s===null},isNullOrUndefined:function(s){return s==null}}});var xt=A((As,Et)=>{"use strict";function zn(s,e){return Object.prototype.hasOwnProperty.call(s,e)}Et.exports=function(s,e,t,n){e=e||"&",t=t||"=";var r={};if(typeof s!="string"||s.length===0)return r;var i=/\+/g;s=s.split(e);var o=1e3;n&&typeof n.maxKeys=="number"&&(o=n.maxKeys);var a=s.length;o>0&&a>o&&(a=o);for(var u=0;u<a;++u){var l=s[u].replace(i,"%20"),m=l.indexOf(t),d,R,y,k;m>=0?(d=l.substr(0,m),R=l.substr(m+1)):(d=l,R=""),y=decodeURIComponent(d),k=decodeURIComponent(R),zn(r,y)?Array.isArray(r[y])?r[y].push(k):r[y]=[r[y],k]:r[y]=k}return r}});var wt=A((Cs,_t)=>{"use strict";var Pe=function(s){switch(typeof s){case"string":return s;case"boolean":return s?"true":"false";case"number":return isFinite(s)?s:"";default:return""}};_t.exports=function(s,e,t,n){return e=e||"&",t=t||"=",s===null&&(s=void 0),typeof s=="object"?Object.keys(s).map(function(r){var i=encodeURIComponent(Pe(r))+t;return Array.isArray(s[r])?s[r].map(function(o){return i+encodeURIComponent(Pe(o))}).join(e):i+encodeURIComponent(Pe(s[r]))}).join(e):n?encodeURIComponent(Pe(n))+t+encodeURIComponent(Pe(s)):""}});var Pt=A(ke=>{"use strict";ke.decode=ke.parse=xt();ke.encode=ke.stringify=wt()});var At=A(Re=>{"use strict";var Wn=vt(),J=Rt();Re.parse=Le;Re.resolve=ts;Re.resolveObject=ns;Re.format=es;Re.Url=V;function V(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Hn=/^([a-z0-9.+-]+:)/i,Gn=/:[0-9]*$/,Kn=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Jn=["<",">",'"',"`"," ","\r",`
`,"	"],Qn=["{","}","|","\\","^","`"].concat(Jn),Je=["'"].concat(Qn),kt=["%","/","?",";","#"].concat(Je),Lt=["/","?","#"],Zn=255,Dt=/^[+a-z0-9A-Z_-]{0,63}$/,Xn=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Yn={javascript:!0,"javascript:":!0},Qe={javascript:!0,"javascript:":!0},ye={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Ze=Pt();function Le(s,e,t){if(s&&J.isObject(s)&&s instanceof V)return s;var n=new V;return n.parse(s,e,t),n}V.prototype.parse=function(s,e,t){if(!J.isString(s))throw new TypeError("Parameter 'url' must be a string, not "+typeof s);var n=s.indexOf("?"),r=n!==-1&&n<s.indexOf("#")?"?":"#",i=s.split(r),o=/\\/g;i[0]=i[0].replace(o,"/"),s=i.join(r);var a=s;if(a=a.trim(),!t&&s.split("#").length===1){var u=Kn.exec(a);if(u)return this.path=a,this.href=a,this.pathname=u[1],u[2]?(this.search=u[2],e?this.query=Ze.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var l=Hn.exec(a);if(l){l=l[0];var m=l.toLowerCase();this.protocol=m,a=a.substr(l.length)}if(t||l||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var d=a.substr(0,2)==="//";d&&!(l&&Qe[l])&&(a=a.substr(2),this.slashes=!0)}if(!Qe[l]&&(d||l&&!ye[l])){for(var R=-1,y=0;y<Lt.length;y++){var k=a.indexOf(Lt[y]);k!==-1&&(R===-1||k<R)&&(R=k)}var ie,S;R===-1?S=a.lastIndexOf("@"):S=a.lastIndexOf("@",R),S!==-1&&(ie=a.slice(0,S),a=a.slice(S+1),this.auth=decodeURIComponent(ie)),R=-1;for(var y=0;y<kt.length;y++){var k=a.indexOf(kt[y]);k!==-1&&(R===-1||k<R)&&(R=k)}R===-1&&(R=a.length),this.host=a.slice(0,R),a=a.slice(R),this.parseHost(),this.hostname=this.hostname||"";var oe=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!oe)for(var g=this.hostname.split(/\./),y=0,x=g.length;y<x;y++){var O=g[y];if(!!O&&!O.match(Dt)){for(var T="",D=0,le=O.length;D<le;D++)O.charCodeAt(D)>127?T+="x":T+=O[D];if(!T.match(Dt)){var z=g.slice(0,y),B=g.slice(y+1),Y=O.match(Xn);Y&&(z.push(Y[1]),B.unshift(Y[2])),B.length&&(a="/"+B.join(".")+a),this.hostname=z.join(".");break}}}this.hostname.length>Zn?this.hostname="":this.hostname=this.hostname.toLowerCase(),oe||(this.hostname=Wn.toASCII(this.hostname));var _e=this.port?":"+this.port:"",De=this.hostname||"";this.host=De+_e,this.href+=this.host,oe&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!Yn[m])for(var y=0,x=Je.length;y<x;y++){var te=Je[y];if(a.indexOf(te)!==-1){var de=encodeURIComponent(te);de===te&&(de=escape(te)),a=a.split(te).join(de)}}var he=a.indexOf("#");he!==-1&&(this.hash=a.substr(he),a=a.slice(0,he));var fe=a.indexOf("?");if(fe!==-1?(this.search=a.substr(fe),this.query=a.substr(fe+1),e&&(this.query=Ze.parse(this.query)),a=a.slice(0,fe)):e&&(this.search="",this.query={}),a&&(this.pathname=a),ye[m]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var _e=this.pathname||"",We=this.search||"";this.path=_e+We}return this.href=this.format(),this};function es(s){return J.isString(s)&&(s=Le(s)),s instanceof V?s.format():V.prototype.format.call(s)}V.prototype.format=function(){var s=this.auth||"";s&&(s=encodeURIComponent(s),s=s.replace(/%3A/i,":"),s+="@");var e=this.protocol||"",t=this.pathname||"",n=this.hash||"",r=!1,i="";this.host?r=s+this.host:this.hostname&&(r=s+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&J.isObject(this.query)&&Object.keys(this.query).length&&(i=Ze.stringify(this.query));var o=this.search||i&&"?"+i||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||ye[e])&&r!==!1?(r="//"+(r||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):r||(r=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),t=t.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+r+t+o+n};function ts(s,e){return Le(s,!1,!0).resolve(e)}V.prototype.resolve=function(s){return this.resolveObject(Le(s,!1,!0)).format()};function ns(s,e){return s?Le(s,!1,!0).resolveObject(e):e}V.prototype.resolveObject=function(s){if(J.isString(s)){var e=new V;e.parse(s,!1,!0),s=e}for(var t=new V,n=Object.keys(this),r=0;r<n.length;r++){var i=n[r];t[i]=this[i]}if(t.hash=s.hash,s.href==="")return t.href=t.format(),t;if(s.slashes&&!s.protocol){for(var o=Object.keys(s),a=0;a<o.length;a++){var u=o[a];u!=="protocol"&&(t[u]=s[u])}return ye[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(s.protocol&&s.protocol!==t.protocol){if(!ye[s.protocol]){for(var l=Object.keys(s),m=0;m<l.length;m++){var d=l[m];t[d]=s[d]}return t.href=t.format(),t}if(t.protocol=s.protocol,!s.host&&!Qe[s.protocol]){for(var x=(s.pathname||"").split("/");x.length&&!(s.host=x.shift()););s.host||(s.host=""),s.hostname||(s.hostname=""),x[0]!==""&&x.unshift(""),x.length<2&&x.unshift(""),t.pathname=x.join("/")}else t.pathname=s.pathname;if(t.search=s.search,t.query=s.query,t.host=s.host||"",t.auth=s.auth,t.hostname=s.hostname||s.host,t.port=s.port,t.pathname||t.search){var R=t.pathname||"",y=t.search||"";t.path=R+y}return t.slashes=t.slashes||s.slashes,t.href=t.format(),t}var k=t.pathname&&t.pathname.charAt(0)==="/",ie=s.host||s.pathname&&s.pathname.charAt(0)==="/",S=ie||k||t.host&&s.pathname,oe=S,g=t.pathname&&t.pathname.split("/")||[],x=s.pathname&&s.pathname.split("/")||[],O=t.protocol&&!ye[t.protocol];if(O&&(t.hostname="",t.port=null,t.host&&(g[0]===""?g[0]=t.host:g.unshift(t.host)),t.host="",s.protocol&&(s.hostname=null,s.port=null,s.host&&(x[0]===""?x[0]=s.host:x.unshift(s.host)),s.host=null),S=S&&(x[0]===""||g[0]==="")),ie)t.host=s.host||s.host===""?s.host:t.host,t.hostname=s.hostname||s.hostname===""?s.hostname:t.hostname,t.search=s.search,t.query=s.query,g=x;else if(x.length)g||(g=[]),g.pop(),g=g.concat(x),t.search=s.search,t.query=s.query;else if(!J.isNullOrUndefined(s.search)){if(O){t.hostname=t.host=g.shift();var T=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;T&&(t.auth=T.shift(),t.host=t.hostname=T.shift())}return t.search=s.search,t.query=s.query,(!J.isNull(t.pathname)||!J.isNull(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!g.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var D=g.slice(-1)[0],le=(t.host||s.host||g.length>1)&&(D==="."||D==="..")||D==="",z=0,B=g.length;B>=0;B--)D=g[B],D==="."?g.splice(B,1):D===".."?(g.splice(B,1),z++):z&&(g.splice(B,1),z--);if(!S&&!oe)for(;z--;z)g.unshift("..");S&&g[0]!==""&&(!g[0]||g[0].charAt(0)!=="/")&&g.unshift(""),le&&g.join("/").substr(-1)!=="/"&&g.push("");var Y=g[0]===""||g[0]&&g[0].charAt(0)==="/";if(O){t.hostname=t.host=Y?"":g.length?g.shift():"";var T=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;T&&(t.auth=T.shift(),t.host=t.hostname=T.shift())}return S=S||t.host&&g.length,S&&!Y&&g.unshift(""),g.length?t.pathname=g.join("/"):(t.pathname=null,t.path=null),(!J.isNull(t.pathname)||!J.isNull(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=s.auth||t.auth,t.slashes=t.slashes||s.slashes,t.href=t.format(),t};V.prototype.parseHost=function(){var s=this.host,e=Gn.exec(s);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),s=s.substr(0,s.length-e.length)),s&&(this.hostname=s)}});var Fe=A(h=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});h.DebugSession=h.ErrorDestination=h.MemoryEvent=h.InvalidatedEvent=h.ProgressEndEvent=h.ProgressUpdateEvent=h.ProgressStartEvent=h.CapabilitiesEvent=h.LoadedSourceEvent=h.ModuleEvent=h.BreakpointEvent=h.ThreadEvent=h.OutputEvent=h.ExitedEvent=h.TerminatedEvent=h.InitializedEvent=h.ContinuedEvent=h.StoppedEvent=h.CompletionItem=h.Module=h.Breakpoint=h.Variable=h.Thread=h.StackFrame=h.Scope=h.Source=void 0;var ss=gt(),I=Oe(),rs=bt(),Ct=At(),It=class{constructor(e,t,n=0,r,i){this.name=e,this.path=t,this.sourceReference=n,r&&(this.origin=r),i&&(this.adapterData=i)}};h.Source=It;var St=class{constructor(e,t,n=!1){this.name=e,this.variablesReference=t,this.expensive=n}};h.Scope=St;var Ot=class{constructor(e,t,n,r=0,i=0){this.id=e,this.source=n,this.line=r,this.column=i,this.name=t}};h.StackFrame=Ot;var Tt=class{constructor(e,t){this.id=e,t?this.name=t:this.name="Thread #"+e}};h.Thread=Tt;var qt=class{constructor(e,t,n=0,r,i){this.name=e,this.value=t,this.variablesReference=n,typeof i=="number"&&(this.namedVariables=i),typeof r=="number"&&(this.indexedVariables=r)}};h.Variable=qt;var Ft=class{constructor(e,t,n,r){this.verified=e;let i=this;typeof t=="number"&&(i.line=t),typeof n=="number"&&(i.column=n),r&&(i.source=r)}setId(e){this.id=e}};h.Breakpoint=Ft;var Bt=class{constructor(e,t){this.id=e,this.name=t}};h.Module=Bt;var Mt=class{constructor(e,t,n=0){this.label=e,this.start=t,this.length=n}};h.CompletionItem=Mt;var jt=class extends I.Event{constructor(e,t,n){super("stopped");this.body={reason:e},typeof t=="number"&&(this.body.threadId=t),typeof n=="string"&&(this.body.text=n)}};h.StoppedEvent=jt;var Ut=class extends I.Event{constructor(e,t){super("continued");this.body={threadId:e},typeof t=="boolean"&&(this.body.allThreadsContinued=t)}};h.ContinuedEvent=Ut;var Vt=class extends I.Event{constructor(){super("initialized")}};h.InitializedEvent=Vt;var Nt=class extends I.Event{constructor(e){super("terminated");if(typeof e=="boolean"||e){let t=this;t.body={restart:e}}}};h.TerminatedEvent=Nt;var $t=class extends I.Event{constructor(e){super("exited");this.body={exitCode:e}}};h.ExitedEvent=$t;var zt=class extends I.Event{constructor(e,t="console",n){super("output");this.body={category:t,output:e},n!==void 0&&(this.body.data=n)}};h.OutputEvent=zt;var Wt=class extends I.Event{constructor(e,t){super("thread");this.body={reason:e,threadId:t}}};h.ThreadEvent=Wt;var Ht=class extends I.Event{constructor(e,t){super("breakpoint");this.body={reason:e,breakpoint:t}}};h.BreakpointEvent=Ht;var Gt=class extends I.Event{constructor(e,t){super("module");this.body={reason:e,module:t}}};h.ModuleEvent=Gt;var Kt=class extends I.Event{constructor(e,t){super("loadedSource");this.body={reason:e,source:t}}};h.LoadedSourceEvent=Kt;var Jt=class extends I.Event{constructor(e){super("capabilities");this.body={capabilities:e}}};h.CapabilitiesEvent=Jt;var Qt=class extends I.Event{constructor(e,t,n){super("progressStart");this.body={progressId:e,title:t},typeof n=="string"&&(this.body.message=n)}};h.ProgressStartEvent=Qt;var Zt=class extends I.Event{constructor(e,t){super("progressUpdate");this.body={progressId:e},typeof t=="string"&&(this.body.message=t)}};h.ProgressUpdateEvent=Zt;var Xt=class extends I.Event{constructor(e,t){super("progressEnd");this.body={progressId:e},typeof t=="string"&&(this.body.message=t)}};h.ProgressEndEvent=Xt;var Yt=class extends I.Event{constructor(e,t,n){super("invalidated");this.body={},e&&(this.body.areas=e),t&&(this.body.threadId=t),n&&(this.body.stackFrameId=n)}};h.InvalidatedEvent=Yt;var en=class extends I.Event{constructor(e,t,n){super("memory");this.body={memoryReference:e,offset:t,count:n}}};h.MemoryEvent=en;var ue;(function(s){s[s.User=1]="User",s[s.Telemetry=2]="Telemetry"})(ue=h.ErrorDestination||(h.ErrorDestination={}));var Q=class extends ss.ProtocolServer{constructor(e,t){super();let n=typeof e=="boolean"?e:!1;this._debuggerLinesStartAt1=n,this._debuggerColumnsStartAt1=n,this._debuggerPathsAreURIs=!1,this._clientLinesStartAt1=!0,this._clientColumnsStartAt1=!0,this._clientPathsAreURIs=!1,this._isServer=typeof t=="boolean"?t:!1,this.on("close",()=>{this.shutdown()}),this.on("error",r=>{this.shutdown()})}setDebuggerPathFormat(e){this._debuggerPathsAreURIs=e!=="path"}setDebuggerLinesStartAt1(e){this._debuggerLinesStartAt1=e}setDebuggerColumnsStartAt1(e){this._debuggerColumnsStartAt1=e}setRunAsServer(e){this._isServer=e}static run(e){(0,rs.runDebugAdapter)(e)}shutdown(){this._isServer||this._isRunningInline()||setTimeout(()=>{process.exit(0)},100)}sendErrorResponse(e,t,n,r,i=ue.User){let o;typeof t=="number"?(o={id:t,format:n},r&&(o.variables=r),i&ue.User&&(o.showUser=!0),i&ue.Telemetry&&(o.sendTelemetry=!0)):o=t,e.success=!1,e.message=Q.formatPII(o.format,!0,o.variables),e.body||(e.body={}),e.body.error=o,this.sendResponse(e)}runInTerminalRequest(e,t,n){this.sendRequest("runInTerminal",e,t,n)}dispatchRequest(e){let t=new I.Response(e);try{if(e.command==="initialize"){var n=e.arguments;if(typeof n.linesStartAt1=="boolean"&&(this._clientLinesStartAt1=n.linesStartAt1),typeof n.columnsStartAt1=="boolean"&&(this._clientColumnsStartAt1=n.columnsStartAt1),n.pathFormat!=="path")this.sendErrorResponse(t,2018,"debug adapter only supports native paths",null,ue.Telemetry);else{let r=t;r.body={},this.initializeRequest(r,n)}}else e.command==="launch"?this.launchRequest(t,e.arguments,e):e.command==="attach"?this.attachRequest(t,e.arguments,e):e.command==="disconnect"?this.disconnectRequest(t,e.arguments,e):e.command==="terminate"?this.terminateRequest(t,e.arguments,e):e.command==="restart"?this.restartRequest(t,e.arguments,e):e.command==="setBreakpoints"?this.setBreakPointsRequest(t,e.arguments,e):e.command==="setFunctionBreakpoints"?this.setFunctionBreakPointsRequest(t,e.arguments,e):e.command==="setExceptionBreakpoints"?this.setExceptionBreakPointsRequest(t,e.arguments,e):e.command==="configurationDone"?this.configurationDoneRequest(t,e.arguments,e):e.command==="continue"?this.continueRequest(t,e.arguments,e):e.command==="next"?this.nextRequest(t,e.arguments,e):e.command==="stepIn"?this.stepInRequest(t,e.arguments,e):e.command==="stepOut"?this.stepOutRequest(t,e.arguments,e):e.command==="stepBack"?this.stepBackRequest(t,e.arguments,e):e.command==="reverseContinue"?this.reverseContinueRequest(t,e.arguments,e):e.command==="restartFrame"?this.restartFrameRequest(t,e.arguments,e):e.command==="goto"?this.gotoRequest(t,e.arguments,e):e.command==="pause"?this.pauseRequest(t,e.arguments,e):e.command==="stackTrace"?this.stackTraceRequest(t,e.arguments,e):e.command==="scopes"?this.scopesRequest(t,e.arguments,e):e.command==="variables"?this.variablesRequest(t,e.arguments,e):e.command==="setVariable"?this.setVariableRequest(t,e.arguments,e):e.command==="setExpression"?this.setExpressionRequest(t,e.arguments,e):e.command==="source"?this.sourceRequest(t,e.arguments,e):e.command==="threads"?this.threadsRequest(t,e):e.command==="terminateThreads"?this.terminateThreadsRequest(t,e.arguments,e):e.command==="evaluate"?this.evaluateRequest(t,e.arguments,e):e.command==="stepInTargets"?this.stepInTargetsRequest(t,e.arguments,e):e.command==="gotoTargets"?this.gotoTargetsRequest(t,e.arguments,e):e.command==="completions"?this.completionsRequest(t,e.arguments,e):e.command==="exceptionInfo"?this.exceptionInfoRequest(t,e.arguments,e):e.command==="loadedSources"?this.loadedSourcesRequest(t,e.arguments,e):e.command==="dataBreakpointInfo"?this.dataBreakpointInfoRequest(t,e.arguments,e):e.command==="setDataBreakpoints"?this.setDataBreakpointsRequest(t,e.arguments,e):e.command==="readMemory"?this.readMemoryRequest(t,e.arguments,e):e.command==="writeMemory"?this.writeMemoryRequest(t,e.arguments,e):e.command==="disassemble"?this.disassembleRequest(t,e.arguments,e):e.command==="cancel"?this.cancelRequest(t,e.arguments,e):e.command==="breakpointLocations"?this.breakpointLocationsRequest(t,e.arguments,e):e.command==="setInstructionBreakpoints"?this.setInstructionBreakpointsRequest(t,e.arguments,e):this.customRequest(e.command,t,e.arguments,e)}catch(r){this.sendErrorResponse(t,1104,"{_stack}",{_exception:r.message,_stack:r.stack},ue.Telemetry)}}initializeRequest(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,e.body.supportsRestartRequest=!1,e.body.supportsExceptionOptions=!1,e.body.supportsValueFormattingOptions=!1,e.body.supportsExceptionInfoRequest=!1,e.body.supportTerminateDebuggee=!1,e.body.supportsDelayedStackTraceLoading=!1,e.body.supportsLoadedSourcesRequest=!1,e.body.supportsLogPoints=!1,e.body.supportsTerminateThreadsRequest=!1,e.body.supportsSetExpression=!1,e.body.supportsTerminateRequest=!1,e.body.supportsDataBreakpoints=!1,e.body.supportsReadMemoryRequest=!1,e.body.supportsDisassembleRequest=!1,e.body.supportsCancelRequest=!1,e.body.supportsBreakpointLocationsRequest=!1,e.body.supportsClipboardContext=!1,e.body.supportsSteppingGranularity=!1,e.body.supportsInstructionBreakpoints=!1,e.body.supportsExceptionFilterOptions=!1,this.sendResponse(e)}disconnectRequest(e,t,n){this.sendResponse(e),this.shutdown()}launchRequest(e,t,n){this.sendResponse(e)}attachRequest(e,t,n){this.sendResponse(e)}terminateRequest(e,t,n){this.sendResponse(e)}restartRequest(e,t,n){this.sendResponse(e)}setBreakPointsRequest(e,t,n){this.sendResponse(e)}setFunctionBreakPointsRequest(e,t,n){this.sendResponse(e)}setExceptionBreakPointsRequest(e,t,n){this.sendResponse(e)}configurationDoneRequest(e,t,n){this.sendResponse(e)}continueRequest(e,t,n){this.sendResponse(e)}nextRequest(e,t,n){this.sendResponse(e)}stepInRequest(e,t,n){this.sendResponse(e)}stepOutRequest(e,t,n){this.sendResponse(e)}stepBackRequest(e,t,n){this.sendResponse(e)}reverseContinueRequest(e,t,n){this.sendResponse(e)}restartFrameRequest(e,t,n){this.sendResponse(e)}gotoRequest(e,t,n){this.sendResponse(e)}pauseRequest(e,t,n){this.sendResponse(e)}sourceRequest(e,t,n){this.sendResponse(e)}threadsRequest(e,t){this.sendResponse(e)}terminateThreadsRequest(e,t,n){this.sendResponse(e)}stackTraceRequest(e,t,n){this.sendResponse(e)}scopesRequest(e,t,n){this.sendResponse(e)}variablesRequest(e,t,n){this.sendResponse(e)}setVariableRequest(e,t,n){this.sendResponse(e)}setExpressionRequest(e,t,n){this.sendResponse(e)}evaluateRequest(e,t,n){this.sendResponse(e)}stepInTargetsRequest(e,t,n){this.sendResponse(e)}gotoTargetsRequest(e,t,n){this.sendResponse(e)}completionsRequest(e,t,n){this.sendResponse(e)}exceptionInfoRequest(e,t,n){this.sendResponse(e)}loadedSourcesRequest(e,t,n){this.sendResponse(e)}dataBreakpointInfoRequest(e,t,n){this.sendResponse(e)}setDataBreakpointsRequest(e,t,n){this.sendResponse(e)}readMemoryRequest(e,t,n){this.sendResponse(e)}writeMemoryRequest(e,t,n){this.sendResponse(e)}disassembleRequest(e,t,n){this.sendResponse(e)}cancelRequest(e,t,n){this.sendResponse(e)}breakpointLocationsRequest(e,t,n){this.sendResponse(e)}setInstructionBreakpointsRequest(e,t,n){this.sendResponse(e)}customRequest(e,t,n,r){this.sendErrorResponse(t,1014,"unrecognized request",null,ue.Telemetry)}convertClientLineToDebugger(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e+1:this._clientLinesStartAt1?e-1:e}convertDebuggerLineToClient(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e-1:this._clientLinesStartAt1?e+1:e}convertClientColumnToDebugger(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e+1:this._clientColumnsStartAt1?e-1:e}convertDebuggerColumnToClient(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e-1:this._clientColumnsStartAt1?e+1:e}convertClientPathToDebugger(e){return this._clientPathsAreURIs!==this._debuggerPathsAreURIs?this._clientPathsAreURIs?Q.uri2path(e):Q.path2uri(e):e}convertDebuggerPathToClient(e){return this._debuggerPathsAreURIs!==this._clientPathsAreURIs?this._debuggerPathsAreURIs?Q.uri2path(e):Q.path2uri(e):e}static path2uri(e){process.platform==="win32"&&(/^[A-Z]:/.test(e)&&(e=e[0].toLowerCase()+e.substr(1)),e=e.replace(/\\/g,"/")),e=encodeURI(e);let t=new Ct.URL("file:");return t.pathname=e,t.toString()}static uri2path(e){let t=new Ct.URL(e),n=decodeURIComponent(t.pathname);return process.platform==="win32"&&(/^\/[a-zA-Z]:/.test(n)&&(n=n[1].toLowerCase()+n.substr(2)),n=n.replace(/\//g,"\\")),n}static formatPII(e,t,n){return e.replace(Q._formatPIIRegexp,function(r,i){return t&&i.length>0&&i[0]!=="_"?r:n[i]&&n.hasOwnProperty(i)?n[i]:r})}};h.DebugSession=Q;Q._formatPIIRegexp=/{([^}]+)}/g});var nn=A(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.InternalLogger=void 0;var tn=class{dispose(){}log(e,t,n){}setup(e){}};Be.InternalLogger=tn});var Ye=A(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.trimLastNewline=j.LogOutputEvent=j.logger=j.Logger=j.LogLevel=void 0;var is=nn(),os=Fe(),re;(function(s){s[s.Verbose=0]="Verbose",s[s.Log=1]="Log",s[s.Warn=2]="Warn",s[s.Error=3]="Error",s[s.Stop=4]="Stop"})(re=j.LogLevel||(j.LogLevel={}));var Xe=class{constructor(){this._pendingLogQ=[]}log(e,t=re.Log){e=e+`
`,this._write(e,t)}verbose(e){this.log(e,re.Verbose)}warn(e){this.log(e,re.Warn)}error(e){this.log(e,re.Error)}dispose(){if(this._currentLogger){let e=this._currentLogger.dispose();return this._currentLogger=null,e}else return Promise.resolve()}_write(e,t=re.Log){e=e+"",this._pendingLogQ?this._pendingLogQ.push({msg:e,level:t}):this._currentLogger&&this._currentLogger.log(e,t)}setup(e,t,n=!0){let r=typeof t=="string"?t:t&&this._logFilePathFromInit;if(this._currentLogger){let i={consoleMinLogLevel:e,logFilePath:r,prependTimestamp:n};this._currentLogger.setup(i).then(()=>{if(this._pendingLogQ){let o=this._pendingLogQ;this._pendingLogQ=null,o.forEach(a=>this._write(a.msg,a.level))}})}}init(e,t,n){this._pendingLogQ=this._pendingLogQ||[],this._currentLogger=new is.InternalLogger(e,n),this._logFilePathFromInit=t}};j.Logger=Xe;j.logger=new Xe;var sn=class extends os.OutputEvent{constructor(e,t){let n=t===re.Error?"stderr":t===re.Warn?"console":"stdout";super(e,n)}};j.LogOutputEvent=sn;function as(s){return s.replace(/(\n|\r\n)$/,"")}j.trimLastNewline=as});var un=A(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.LoggingDebugSession=void 0;var on=Ye(),Ee=on.logger,rn=Fe(),an=class extends rn.DebugSession{constructor(e,t,n){super(t,n);this.obsolete_logFilePath=e,this.on("error",r=>{Ee.error(r.body)})}start(e,t){super.start(e,t),Ee.init(n=>this.sendEvent(n),this.obsolete_logFilePath,this._isServer)}sendEvent(e){if(!(e instanceof on.LogOutputEvent)){let t=e;e instanceof rn.OutputEvent&&e.body&&e.body.data&&e.body.data.doNotLogOutput&&(delete e.body.data.doNotLogOutput,t={...e},t.body={...e.body,output:"<output not logged>"}),Ee.verbose(`To client: ${JSON.stringify(t)}`)}super.sendEvent(e)}sendRequest(e,t,n,r){Ee.verbose(`To client: ${JSON.stringify(e)}(${JSON.stringify(t)}), timeout: ${n}`),super.sendRequest(e,t,n,r)}sendResponse(e){Ee.verbose(`To client: ${JSON.stringify(e)}`),super.sendResponse(e)}dispatchRequest(e){Ee.verbose(`From client: ${e.command}(${JSON.stringify(e.arguments)})`),super.dispatchRequest(e)}};Me.LoggingDebugSession=an});var ln=A(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.Handles=void 0;var cn=class{constructor(e){this.START_HANDLE=1e3,this._handleMap=new Map,this._nextHandle=typeof e=="number"?e:this.START_HANDLE}reset(){this._nextHandle=this.START_HANDLE,this._handleMap=new Map}create(e){var t=this._nextHandle++;return this._handleMap.set(t,e),t}get(e,t){return this._handleMap.get(e)||t}};je.Handles=cn});var fn=A(c=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});c.Handles=c.Response=c.Event=c.ErrorDestination=c.CompletionItem=c.Module=c.Source=c.Breakpoint=c.Variable=c.Scope=c.StackFrame=c.Thread=c.MemoryEvent=c.InvalidatedEvent=c.ProgressEndEvent=c.ProgressUpdateEvent=c.ProgressStartEvent=c.CapabilitiesEvent=c.LoadedSourceEvent=c.ModuleEvent=c.BreakpointEvent=c.ThreadEvent=c.OutputEvent=c.ContinuedEvent=c.StoppedEvent=c.ExitedEvent=c.TerminatedEvent=c.InitializedEvent=c.logger=c.Logger=c.LoggingDebugSession=c.DebugSession=void 0;var w=Fe();Object.defineProperty(c,"DebugSession",{enumerable:!0,get:function(){return w.DebugSession}});Object.defineProperty(c,"InitializedEvent",{enumerable:!0,get:function(){return w.InitializedEvent}});Object.defineProperty(c,"TerminatedEvent",{enumerable:!0,get:function(){return w.TerminatedEvent}});Object.defineProperty(c,"ExitedEvent",{enumerable:!0,get:function(){return w.ExitedEvent}});Object.defineProperty(c,"StoppedEvent",{enumerable:!0,get:function(){return w.StoppedEvent}});Object.defineProperty(c,"ContinuedEvent",{enumerable:!0,get:function(){return w.ContinuedEvent}});Object.defineProperty(c,"OutputEvent",{enumerable:!0,get:function(){return w.OutputEvent}});Object.defineProperty(c,"ThreadEvent",{enumerable:!0,get:function(){return w.ThreadEvent}});Object.defineProperty(c,"BreakpointEvent",{enumerable:!0,get:function(){return w.BreakpointEvent}});Object.defineProperty(c,"ModuleEvent",{enumerable:!0,get:function(){return w.ModuleEvent}});Object.defineProperty(c,"LoadedSourceEvent",{enumerable:!0,get:function(){return w.LoadedSourceEvent}});Object.defineProperty(c,"CapabilitiesEvent",{enumerable:!0,get:function(){return w.CapabilitiesEvent}});Object.defineProperty(c,"ProgressStartEvent",{enumerable:!0,get:function(){return w.ProgressStartEvent}});Object.defineProperty(c,"ProgressUpdateEvent",{enumerable:!0,get:function(){return w.ProgressUpdateEvent}});Object.defineProperty(c,"ProgressEndEvent",{enumerable:!0,get:function(){return w.ProgressEndEvent}});Object.defineProperty(c,"InvalidatedEvent",{enumerable:!0,get:function(){return w.InvalidatedEvent}});Object.defineProperty(c,"MemoryEvent",{enumerable:!0,get:function(){return w.MemoryEvent}});Object.defineProperty(c,"Thread",{enumerable:!0,get:function(){return w.Thread}});Object.defineProperty(c,"StackFrame",{enumerable:!0,get:function(){return w.StackFrame}});Object.defineProperty(c,"Scope",{enumerable:!0,get:function(){return w.Scope}});Object.defineProperty(c,"Variable",{enumerable:!0,get:function(){return w.Variable}});Object.defineProperty(c,"Breakpoint",{enumerable:!0,get:function(){return w.Breakpoint}});Object.defineProperty(c,"Source",{enumerable:!0,get:function(){return w.Source}});Object.defineProperty(c,"Module",{enumerable:!0,get:function(){return w.Module}});Object.defineProperty(c,"CompletionItem",{enumerable:!0,get:function(){return w.CompletionItem}});Object.defineProperty(c,"ErrorDestination",{enumerable:!0,get:function(){return w.ErrorDestination}});var us=un();Object.defineProperty(c,"LoggingDebugSession",{enumerable:!0,get:function(){return us.LoggingDebugSession}});var dn=Ye();c.Logger=dn;var hn=Oe();Object.defineProperty(c,"Event",{enumerable:!0,get:function(){return hn.Event}});Object.defineProperty(c,"Response",{enumerable:!0,get:function(){return hn.Response}});var cs=ln();Object.defineProperty(c,"Handles",{enumerable:!0,get:function(){return cs.Handles}});var ls=dn.logger;c.logger=ls});var gn=A((js,mn)=>{"use strict";function Z(s){if(typeof s!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(s))}function pn(s,e){for(var t="",n=0,r=-1,i=0,o,a=0;a<=s.length;++a){if(a<s.length)o=s.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(r===a-1||i===1))if(r!==a-1&&i===2){if(t.length<2||n!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var u=t.lastIndexOf("/");if(u!==t.length-1){u===-1?(t="",n=0):(t=t.slice(0,u),n=t.length-1-t.lastIndexOf("/")),r=a,i=0;continue}}else if(t.length===2||t.length===1){t="",n=0,r=a,i=0;continue}}e&&(t.length>0?t+="/..":t="..",n=2)}else t.length>0?t+="/"+s.slice(r+1,a):t=s.slice(r+1,a),n=a-r-1;r=a,i=0}else o===46&&i!==-1?++i:i=-1}return t}function ds(s,e){var t=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+n:t+s+n:n}var xe={resolve:function(){for(var e="",t=!1,n,r=arguments.length-1;r>=-1&&!t;r--){var i;r>=0?i=arguments[r]:(n===void 0&&(n=process.cwd()),i=n),Z(i),i.length!==0&&(e=i+"/"+e,t=i.charCodeAt(0)===47)}return e=pn(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Z(e),e.length===0)return".";var t=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=pn(e,!t),e.length===0&&!t&&(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return Z(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];Z(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":xe.normalize(e)},relative:function(e,t){if(Z(e),Z(t),e===t||(e=xe.resolve(e),t=xe.resolve(t),e===t))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var r=e.length,i=r-n,o=1;o<t.length&&t.charCodeAt(o)===47;++o);for(var a=t.length,u=a-o,l=i<u?i:u,m=-1,d=0;d<=l;++d){if(d===l){if(u>l){if(t.charCodeAt(o+d)===47)return t.slice(o+d+1);if(d===0)return t.slice(o+d)}else i>l&&(e.charCodeAt(n+d)===47?m=d:d===0&&(m=0));break}var R=e.charCodeAt(n+d),y=t.charCodeAt(o+d);if(R!==y)break;R===47&&(m=d)}var k="";for(d=n+m+1;d<=r;++d)(d===r||e.charCodeAt(d)===47)&&(k.length===0?k+="..":k+="/..");return k.length>0?k+t.slice(o+m):(o+=m,t.charCodeAt(o)===47&&++o,t.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(Z(e),e.length===0)return".";for(var t=e.charCodeAt(0),n=t===47,r=-1,i=!0,o=e.length-1;o>=1;--o)if(t=e.charCodeAt(o),t===47){if(!i){r=o;break}}else i=!1;return r===-1?n?"/":".":n&&r===1?"//":e.slice(0,r)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Z(e);var n=0,r=-1,i=!0,o;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var a=t.length-1,u=-1;for(o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(l===47){if(!i){n=o+1;break}}else u===-1&&(i=!1,u=o+1),a>=0&&(l===t.charCodeAt(a)?--a===-1&&(r=o):(a=-1,r=u))}return n===r?r=u:r===-1&&(r=e.length),e.slice(n,r)}else{for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!i){n=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":e.slice(n,r)}},extname:function(e){Z(e);for(var t=-1,n=0,r=-1,i=!0,o=0,a=e.length-1;a>=0;--a){var u=e.charCodeAt(a);if(u===47){if(!i){n=a+1;break}continue}r===-1&&(i=!1,r=a+1),u===46?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||r===-1||o===0||o===1&&t===r-1&&t===n+1?"":e.slice(t,r)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return ds("/",e)},parse:function(e){Z(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var n=e.charCodeAt(0),r=n===47,i;r?(t.root="/",i=1):i=0;for(var o=-1,a=0,u=-1,l=!0,m=e.length-1,d=0;m>=i;--m){if(n=e.charCodeAt(m),n===47){if(!l){a=m+1;break}continue}u===-1&&(l=!1,u=m+1),n===46?o===-1?o=m:d!==1&&(d=1):o!==-1&&(d=-1)}return o===-1||u===-1||d===0||d===1&&o===u-1&&o===a+1?u!==-1&&(a===0&&r?t.base=t.name=e.slice(1,u):t.base=t.name=e.slice(a,u)):(a===0&&r?(t.name=e.slice(1,o),t.base=e.slice(1,u)):(t.name=e.slice(a,o),t.base=e.slice(a,u)),t.ext=e.slice(o,u)),a>0?t.dir=e.slice(0,a-1):r&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};xe.posix=xe;mn.exports=xe});var yn=A(vn=>{function Ve(){this.waiters=[]}Ve.prototype.wait=function(s){var e=this,t={};this.waiters.push(t);var n=new Promise(function(r){var i=!1;t.resolve=function(o){if(!i){if(i=!0,t.timeout&&(clearTimeout(t.timeout),t.timeout=null),!o){var a=e.waiters.indexOf(t);a>-1&&e.waiters.splice(a,1)}r()}}});return s>0&&isFinite(s)&&(t.timeout=setTimeout(function(){t.timeout=null,t.resolve()},s)),n};Ve.prototype.notify=function(){this.waiters.length>0&&this.waiters.pop().resolve(!0)};Ve.prototype.notifyAll=function(){for(var s=this.waiters.length-1;s>=0;s--)this.waiters[s].resolve(!0);this.waiters=[]};vn.Subject=Ve});var xn=A(Ne=>{"use strict";Ne.byteLength=fs;Ne.toByteArray=ms;Ne.fromByteArray=vs;var X=[],$=[],hs=typeof Uint8Array<"u"?Uint8Array:Array,tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(ce=0,Rn=tt.length;ce<Rn;++ce)X[ce]=tt[ce],$[tt.charCodeAt(ce)]=ce;var ce,Rn;$["-".charCodeAt(0)]=62;$["_".charCodeAt(0)]=63;function En(s){var e=s.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=s.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function fs(s){var e=En(s),t=e[0],n=e[1];return(t+n)*3/4-n}function ps(s,e,t){return(e+t)*3/4-t}function ms(s){var e,t=En(s),n=t[0],r=t[1],i=new hs(ps(s,n,r)),o=0,a=r>0?n-4:n,u;for(u=0;u<a;u+=4)e=$[s.charCodeAt(u)]<<18|$[s.charCodeAt(u+1)]<<12|$[s.charCodeAt(u+2)]<<6|$[s.charCodeAt(u+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return r===2&&(e=$[s.charCodeAt(u)]<<2|$[s.charCodeAt(u+1)]>>4,i[o++]=e&255),r===1&&(e=$[s.charCodeAt(u)]<<10|$[s.charCodeAt(u+1)]<<4|$[s.charCodeAt(u+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function gs(s){return X[s>>18&63]+X[s>>12&63]+X[s>>6&63]+X[s&63]}function bs(s,e,t){for(var n,r=[],i=e;i<t;i+=3)n=(s[i]<<16&16711680)+(s[i+1]<<8&65280)+(s[i+2]&255),r.push(gs(n));return r.join("")}function vs(s){for(var e,t=s.length,n=t%3,r=[],i=16383,o=0,a=t-n;o<a;o+=i)r.push(bs(s,o,o+i>a?a:o+i));return n===1?(e=s[t-1],r.push(X[e>>2]+X[e<<4&63]+"==")):n===2&&(e=(s[t-2]<<8)+s[t-1],r.push(X[e>>10]+X[e>>4&63]+X[e<<2&63]+"=")),r.join("")}});var xs={};Tn(xs,{activate:()=>Rs,deactivate:()=>Es});module.exports=qn(xs);var v=pe(require("vscode"));var f=pe(fn()),_n=pe(gn());var bn=pe(Ke()),N=class{constructor(e,t){this.name=e;this._value=t}get value(){return this._value}set value(e){this._value=e,this._memory=void 0}get memory(){return this._memory===void 0&&typeof this._value=="string"&&(this._memory=new TextEncoder().encode(this._value)),this._memory}setMemory(e,t=0){let n=this.memory;!n||(n.set(e,t),this._memory=n,this._value=new TextDecoder().decode(n))}};function Ue(s){return new Promise(e=>setTimeout(e,s))}var et=class extends bn.EventEmitter{constructor(e){super();this.fileAccessor=e;this._sourceFile="";this.variables=new Map;this.sourceLines=[];this.instructions=[];this.starts=[];this.ends=[];this._currentLine=0;this.instruction=0;this.breakPoints=new Map;this.instructionBreakpoints=new Set;this.breakpointId=1;this.breakAddresses=new Map;this.otherExceptions=!1}get sourceFile(){return this._sourceFile}get currentLine(){return this._currentLine}set currentLine(e){this._currentLine=e,this.instruction=this.starts[e]}async start(e,t,n){await this.loadSource(this.normalizePathAndCasing(e)),n?(await this.verifyBreakpoints(this._sourceFile),t?this.findNextStatement(!1,"stopOnEntry"):this.continue(!1)):this.continue(!1)}continue(e){for(;!this.executeLine(this.currentLine,e)&&!(this.updateCurrentLine(e)||this.findNextStatement(e)););}step(e,t){e?(t?this.instruction--:this.instruction++,this.sendEvent("stopOnStep")):this.executeLine(this.currentLine,t)||this.updateCurrentLine(t)||this.findNextStatement(t,"stopOnStep")}updateCurrentLine(e){if(e)if(this.currentLine>0)this.currentLine--;else return this.currentLine=0,this.currentColumn=void 0,this.sendEvent("stopOnEntry"),!0;else if(this.currentLine<this.sourceLines.length-1)this.currentLine++;else return this.currentColumn=void 0,this.sendEvent("end"),!0;return!1}stepIn(e){typeof e=="number"?(this.currentColumn=e,this.sendEvent("stopOnStep")):(typeof this.currentColumn=="number"?this.currentColumn<=this.sourceLines[this.currentLine].length&&(this.currentColumn+=1):this.currentColumn=1,this.sendEvent("stopOnStep"))}stepOut(){typeof this.currentColumn=="number"&&(this.currentColumn-=1,this.currentColumn===0&&(this.currentColumn=void 0)),this.sendEvent("stopOnStep")}getStepInTargets(e){let t=this.getLine(),n=this.getWords(this.currentLine,t);if(e<0||e>=n.length)return[];let{name:r,index:i}=n[e];return r.split("").map((o,a)=>({id:i+a,label:`target: ${o}`}))}stack(e,t){let n=this.getLine(),r=this.getWords(this.currentLine,n);r.push({name:"BOTTOM",line:-1,index:-1});let i=n.indexOf("disassembly")>=0?this.instruction:void 0,o=typeof this.currentColumn=="number"?this.currentColumn:void 0,a=[];for(let u=e;u<Math.min(t,r.length);u++){let l={index:u,name:`${r[u].name}(${u})`,file:this._sourceFile,line:this.currentLine,column:o,instruction:i};a.push(l)}return{frames:a,count:r.length}}getBreakpoints(e,t){return this.getWords(t,this.getLine(t)).filter(n=>n.name.length>8).map(n=>n.index)}async setBreakPoint(e,t){e=this.normalizePathAndCasing(e);let n={verified:!1,line:t,id:this.breakpointId++},r=this.breakPoints.get(e);return r||(r=new Array,this.breakPoints.set(e,r)),r.push(n),await this.verifyBreakpoints(e),n}clearBreakPoint(e,t){let n=this.breakPoints.get(this.normalizePathAndCasing(e));if(n){let r=n.findIndex(i=>i.line===t);if(r>=0){let i=n[r];return n.splice(r,1),i}}}clearBreakpoints(e){this.breakPoints.delete(this.normalizePathAndCasing(e))}setDataBreakpoint(e,t){let n=t==="readWrite"?"read write":t,r=this.breakAddresses.get(e);return r?r!==n&&this.breakAddresses.set(e,"read write"):this.breakAddresses.set(e,n),!0}clearAllDataBreakpoints(){this.breakAddresses.clear()}setExceptionsFilters(e,t){this.namedException=e,this.otherExceptions=t}setInstructionBreakpoint(e){return this.instructionBreakpoints.add(e),!0}clearInstructionBreakpoints(){this.instructionBreakpoints.clear()}async getGlobalVariables(e){let t=[];for(let n=0;n<10&&(t.push(new N(`global_${n}`,n)),!(e&&e()));n++)await Ue(1e3);return t}getLocalVariables(){return Array.from(this.variables,([e,t])=>t)}getLocalVariable(e){return this.variables.get(e)}disassemble(e,t){let n=[];for(let r=e;r<e+t;r++)r>=0&&r<this.instructions.length?n.push({address:r,instruction:this.instructions[r].name,line:this.instructions[r].line}):n.push({address:r,instruction:"nop"});return n}getLine(e){return this.sourceLines[e===void 0?this.currentLine:e].trim()}getWords(e,t){let n=/[a-z]+/ig,r=[],i;for(;i=n.exec(t);)r.push({name:i[0],line:e,index:i.index});return r}async loadSource(e){this._sourceFile!==e&&(this._sourceFile=this.normalizePathAndCasing(e),this.initializeContents(await this.fileAccessor.readFile(e)))}initializeContents(e){this.sourceLines=new TextDecoder().decode(e).split(/\r?\n/),this.instructions=[],this.starts=[],this.instructions=[],this.ends=[];for(let t=0;t<this.sourceLines.length;t++){this.starts.push(this.instructions.length);let n=this.getWords(t,this.sourceLines[t]);for(let r of n)this.instructions.push(r);this.ends.push(this.instructions.length)}}findNextStatement(e,t){for(let n=this.currentLine;e?n>=0:n<this.sourceLines.length;e?n--:n++){let r=this.breakPoints.get(this._sourceFile);if(r){let o=r.filter(a=>a.line===n);if(o.length>0)return this.sendEvent("stopOnBreakpoint"),o[0].verified||(o[0].verified=!0,this.sendEvent("breakpointValidated",o[0])),this.currentLine=n,!0}if(this.getLine(n).length>0){this.currentLine=n;break}}return t?(this.sendEvent(t),!0):!1}executeLine(e,t){for(;t?this.instruction>=this.starts[e]:this.instruction<this.ends[e];)if(t?this.instruction--:this.instruction++,this.instructionBreakpoints.has(this.instruction))return this.sendEvent("stopOnInstructionBreakpoint"),!0;let n=this.getLine(e),r=/\$([a-z][a-z0-9]*)(=(false|true|[0-9]+(\.[0-9]+)?|\".*\"|\{.*\}))?/ig,i;for(;i=r.exec(n);)if(i.length===5){let l,m=i[1],d=i[3],R=new N(m,d);d&&d.length>0?(d==="true"?R.value=!0:d==="false"?R.value=!1:d[0]==='"'?R.value=d.slice(1,-1):d[0]==="{"?R.value=[new N("fBool",!0),new N("fInteger",123),new N("fString","hello"),new N("flazyInteger",321)]:R.value=parseFloat(d),this.variables.has(m)&&(l="write"),this.variables.set(m,R)):this.variables.has(m)&&(l="read");let y=this.breakAddresses.get(m);if(l&&y&&y.indexOf(l)>=0)return this.sendEvent("stopOnDataBreakpoint",l),!0}let o=/(log|prio|out|err)\(([^\)]*)\)/g,a;for(;a=o.exec(n);)a.length===3&&this.sendEvent("output",a[1],a[2],this._sourceFile,e,a.index);let u=/exception\((.*)\)/.exec(n);if(u&&u.length===2){let l=u[1].trim();if(this.namedException===l)return this.sendEvent("stopOnException",l),!0;if(this.otherExceptions)return this.sendEvent("stopOnException",void 0),!0}else if(n.indexOf("exception")>=0&&this.otherExceptions)return this.sendEvent("stopOnException",void 0),!0;return!1}async verifyBreakpoints(e){let t=this.breakPoints.get(e);t&&(await this.loadSource(e),t.forEach(n=>{if(!n.verified&&n.line<this.sourceLines.length){let r=this.getLine(n.line);(r.length===0||r.indexOf("+")===0)&&n.line++,r.indexOf("-")===0&&n.line--,r.indexOf("lazy")<0&&(n.verified=!0,this.sendEvent("breakpointValidated",n))}}))}sendEvent(e,...t){setTimeout(()=>{this.emit(e,...t)},0)}normalizePathAndCasing(e){return this.fileAccessor.isWindows?e.replace(/\//g,"\\").toLowerCase():e.replace(/\\/g,"/")}};var wn=pe(yn()),ze=pe(xn()),G=class extends f.LoggingDebugSession{constructor(e){super("mock-debug.txt");this._variableHandles=new f.Handles;this._configurationDone=new wn.Subject;this._cancellationTokens=new Map;this._reportProgress=!1;this._progressId=1e4;this._cancelledProgressId=void 0;this._isProgressCancellable=!0;this._valuesInHex=!1;this._useInvalidatedEvent=!1;this._addressesInHex=!0;this.setDebuggerLinesStartAt1(!1),this.setDebuggerColumnsStartAt1(!1),this._runtime=new et(e),this._runtime.on("stopOnEntry",()=>{this.sendEvent(new f.StoppedEvent("entry",G.threadID))}),this._runtime.on("stopOnStep",()=>{this.sendEvent(new f.StoppedEvent("step",G.threadID))}),this._runtime.on("stopOnBreakpoint",()=>{this.sendEvent(new f.StoppedEvent("breakpoint",G.threadID))}),this._runtime.on("stopOnDataBreakpoint",()=>{this.sendEvent(new f.StoppedEvent("data breakpoint",G.threadID))}),this._runtime.on("stopOnInstructionBreakpoint",()=>{this.sendEvent(new f.StoppedEvent("instruction breakpoint",G.threadID))}),this._runtime.on("stopOnException",t=>{t?this.sendEvent(new f.StoppedEvent(`exception(${t})`,G.threadID)):this.sendEvent(new f.StoppedEvent("exception",G.threadID))}),this._runtime.on("breakpointValidated",t=>{this.sendEvent(new f.BreakpointEvent("changed",{verified:t.verified,id:t.id}))}),this._runtime.on("output",(t,n,r,i,o)=>{let a;switch(t){case"prio":a="important";break;case"out":a="stdout";break;case"err":a="stderr";break;default:a="console";break}let u=new f.OutputEvent(`${n}
`,a);(n==="start"||n==="startCollapsed"||n==="end")&&(u.body.group=n,u.body.output=`group-${n}
`),u.body.source=this.createSource(r),u.body.line=this.convertDebuggerLineToClient(i),u.body.column=this.convertDebuggerColumnToClient(o),this.sendEvent(u)}),this._runtime.on("end",()=>{this.sendEvent(new f.TerminatedEvent)})}initializeRequest(e,t){t.supportsProgressReporting&&(this._reportProgress=!0),t.supportsInvalidatedEvent&&(this._useInvalidatedEvent=!0),e.body=e.body||{},e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!0,e.body.supportsStepBack=!0,e.body.supportsDataBreakpoints=!0,e.body.supportsCompletionsRequest=!0,e.body.completionTriggerCharacters=[".","["],e.body.supportsCancelRequest=!0,e.body.supportsBreakpointLocationsRequest=!0,e.body.supportsStepInTargetsRequest=!0,e.body.supportsExceptionFilterOptions=!0,e.body.exceptionBreakpointFilters=[{filter:"namedException",label:"Named Exception",description:"Break on named exceptions. Enter the exception's name as the Condition.",default:!1,supportsCondition:!0,conditionDescription:"Enter the exception's name"},{filter:"otherExceptions",label:"Other Exceptions",description:"This is a other exception",default:!0,supportsCondition:!1}],e.body.supportsExceptionInfoRequest=!0,e.body.supportsSetVariable=!0,e.body.supportsSetExpression=!0,e.body.supportsDisassembleRequest=!0,e.body.supportsSteppingGranularity=!0,e.body.supportsInstructionBreakpoints=!0,e.body.supportsReadMemoryRequest=!0,e.body.supportsWriteMemoryRequest=!0,e.body.supportSuspendDebuggee=!0,e.body.supportTerminateDebuggee=!0,e.body.supportsFunctionBreakpoints=!0,e.body.supportsDelayedStackTraceLoading=!0,this.sendResponse(e),this.sendEvent(new f.InitializedEvent)}configurationDoneRequest(e,t){super.configurationDoneRequest(e,t),this._configurationDone.notify()}disconnectRequest(e,t,n){console.log(`disconnectRequest suspend: ${t.suspendDebuggee}, terminate: ${t.terminateDebuggee}`)}async attachRequest(e,t){return this.launchRequest(e,t)}async launchRequest(e,t){f.logger.setup(t.trace?f.Logger.LogLevel.Verbose:f.Logger.LogLevel.Stop,!1),await this._configurationDone.wait(1e3),await this._runtime.start(t.program,!!t.stopOnEntry,!t.noDebug),t.compileError?this.sendErrorResponse(e,{id:1001,format:"compile error: some fake error.",showUser:t.compileError==="show"?!0:t.compileError==="hide"?!1:void 0}):this.sendResponse(e)}setFunctionBreakPointsRequest(e,t,n){this.sendResponse(e)}async setBreakPointsRequest(e,t){let n=t.source.path,r=t.lines||[];this._runtime.clearBreakpoints(n);let i=r.map(async a=>{let{verified:u,line:l,id:m}=await this._runtime.setBreakPoint(n,this.convertClientLineToDebugger(a)),d=new f.Breakpoint(u,this.convertDebuggerLineToClient(l));return d.id=m,d}),o=await Promise.all(i);e.body={breakpoints:o},this.sendResponse(e)}breakpointLocationsRequest(e,t,n){if(t.source.path){let r=this._runtime.getBreakpoints(t.source.path,this.convertClientLineToDebugger(t.line));e.body={breakpoints:r.map(i=>({line:t.line,column:this.convertDebuggerColumnToClient(i)}))}}else e.body={breakpoints:[]};this.sendResponse(e)}async setExceptionBreakPointsRequest(e,t){let n,r=!1;if(t.filterOptions)for(let i of t.filterOptions)switch(i.filterId){case"namedException":n=t.filterOptions[0].condition;break;case"otherExceptions":r=!0;break}t.filters&&t.filters.indexOf("otherExceptions")>=0&&(r=!0),this._runtime.setExceptionsFilters(n,r),this.sendResponse(e)}exceptionInfoRequest(e,t){e.body={exceptionId:"Exception ID",description:"This is a descriptive description of the exception.",breakMode:"always",details:{message:"Message contained in the exception.",typeName:"Short type name of the exception object",stackTrace:`stack frame 1
stack frame 2`}},this.sendResponse(e)}threadsRequest(e){e.body={threads:[new f.Thread(G.threadID,"thread 1"),new f.Thread(G.threadID+1,"thread 2")]},this.sendResponse(e)}stackTraceRequest(e,t){let n=typeof t.startFrame=="number"?t.startFrame:0,r=typeof t.levels=="number"?t.levels:1e3,i=n+r,o=this._runtime.stack(n,i);e.body={stackFrames:o.frames.map((a,u)=>{let l=new f.StackFrame(a.index,a.name,this.createSource(a.file),this.convertDebuggerLineToClient(a.line));if(typeof a.column=="number"&&(l.column=this.convertDebuggerColumnToClient(a.column)),typeof a.instruction=="number"){let m=this.formatAddress(a.instruction);l.name=`${a.name} ${m}`,l.instructionPointerReference=m}return l}),totalFrames:o.count},this.sendResponse(e)}scopesRequest(e,t){e.body={scopes:[new f.Scope("Locals",this._variableHandles.create("locals"),!1),new f.Scope("Globals",this._variableHandles.create("globals"),!0)]},this.sendResponse(e)}async writeMemoryRequest(e,{data:t,memoryReference:n,offset:r=0}){let i=this._variableHandles.get(Number(n));if(typeof i=="object"){let o=ze.toByteArray(t);i.setMemory(o,r),e.body={bytesWritten:o.length}}else e.body={bytesWritten:0};this.sendResponse(e),this.sendEvent(new f.InvalidatedEvent(["variables"]))}async readMemoryRequest(e,{offset:t=0,count:n,memoryReference:r}){let i=this._variableHandles.get(Number(r));if(typeof i=="object"&&i.memory){let o=i.memory.subarray(Math.min(t,i.memory.length),Math.min(t+n,i.memory.length));e.body={address:t.toString(),data:ze.fromByteArray(o),unreadableBytes:n-o.length}}else e.body={address:t.toString(),data:"",unreadableBytes:n};this.sendResponse(e)}async variablesRequest(e,t,n){let r=[],i=this._variableHandles.get(t.variablesReference);i==="locals"?r=this._runtime.getLocalVariables():i==="globals"?n?(this._cancellationTokens.set(n.seq,!1),r=await this._runtime.getGlobalVariables(()=>!!this._cancellationTokens.get(n.seq)),this._cancellationTokens.delete(n.seq)):r=await this._runtime.getGlobalVariables():i&&Array.isArray(i.value)&&(r=i.value),e.body={variables:r.map(o=>this.convertFromRuntime(o))},this.sendResponse(e)}setVariableRequest(e,t){let n=this._variableHandles.get(t.variablesReference),r=n==="locals"?this._runtime.getLocalVariable(t.name):n instanceof N&&n.value instanceof Array?n.value.find(i=>i.name===t.name):void 0;r&&(r.value=this.convertToRuntime(t.value),e.body=this.convertFromRuntime(r),r.memory&&r.reference&&this.sendEvent(new f.MemoryEvent(String(r.reference),0,r.memory.length))),this.sendResponse(e)}continueRequest(e,t){this._runtime.continue(!1),this.sendResponse(e)}reverseContinueRequest(e,t){this._runtime.continue(!0),this.sendResponse(e)}nextRequest(e,t){this._runtime.step(t.granularity==="instruction",!1),this.sendResponse(e)}stepBackRequest(e,t){this._runtime.step(t.granularity==="instruction",!0),this.sendResponse(e)}stepInTargetsRequest(e,t){let n=this._runtime.getStepInTargets(t.frameId);e.body={targets:n.map(r=>({id:r.id,label:r.label}))},this.sendResponse(e)}stepInRequest(e,t){this._runtime.stepIn(t.targetId),this.sendResponse(e)}stepOutRequest(e,t){this._runtime.stepOut(),this.sendResponse(e)}async evaluateRequest(e,t){let n,r;switch(t.context){case"repl":let i=/new +([0-9]+)/.exec(t.expression);if(i&&i.length===2){let o=await this._runtime.setBreakPoint(this._runtime.sourceFile,this.convertClientLineToDebugger(parseInt(i[1]))),a=new f.Breakpoint(o.verified,this.convertDebuggerLineToClient(o.line),void 0,this.createSource(this._runtime.sourceFile));a.id=o.id,this.sendEvent(new f.BreakpointEvent("new",a)),n="breakpoint created"}else{let o=/del +([0-9]+)/.exec(t.expression);if(o&&o.length===2){let a=this._runtime.clearBreakPoint(this._runtime.sourceFile,this.convertClientLineToDebugger(parseInt(o[1])));if(a){let u=new f.Breakpoint(!1);u.id=a.id,this.sendEvent(new f.BreakpointEvent("removed",u)),n="breakpoint deleted"}}else{let a=/progress/.exec(t.expression);a&&a.length===1&&(this._reportProgress?(n="progress started",this.progressSequence()):n="frontend doesn't support progress (capability 'supportsProgressReporting' not set)")}}default:t.expression.startsWith("$")?r=this._runtime.getLocalVariable(t.expression.substr(1)):r=new N("eval",this.convertToRuntime(t.expression));break}if(r){let i=this.convertFromRuntime(r);e.body={result:i.value,type:i.type,variablesReference:i.variablesReference,presentationHint:i.presentationHint}}else e.body={result:n||`evaluate(context: '${t.context}', '${t.expression}')`,variablesReference:0};this.sendResponse(e)}setExpressionRequest(e,t){if(t.expression.startsWith("$")){let n=this._runtime.getLocalVariable(t.expression.substr(1));n?(n.value=this.convertToRuntime(t.value),e.body=this.convertFromRuntime(n),this.sendResponse(e)):this.sendErrorResponse(e,{id:1002,format:"variable '{lexpr}' not found",variables:{lexpr:t.expression},showUser:!0})}else this.sendErrorResponse(e,{id:1003,format:"'{lexpr}' not an assignable expression",variables:{lexpr:t.expression},showUser:!0})}async progressSequence(){let e=""+this._progressId++;await Ue(100);let t=this._isProgressCancellable?"Cancellable operation":"Long running operation",n=new f.ProgressStartEvent(e,t);n.body.cancellable=this._isProgressCancellable,this._isProgressCancellable=!this._isProgressCancellable,this.sendEvent(n),this.sendEvent(new f.OutputEvent(`start progress: ${e}
`));let r="progress ended";for(let i=0;i<100;i++)if(await Ue(500),this.sendEvent(new f.ProgressUpdateEvent(e,`progress: ${i}`)),this._cancelledProgressId===e){r="progress cancelled",this._cancelledProgressId=void 0,this.sendEvent(new f.OutputEvent(`cancel progress: ${e}
`));break}this.sendEvent(new f.ProgressEndEvent(e,r)),this.sendEvent(new f.OutputEvent(`end progress: ${e}
`)),this._cancelledProgressId=void 0}dataBreakpointInfoRequest(e,t){e.body={dataId:null,description:"cannot break on data access",accessTypes:void 0,canPersist:!1},t.variablesReference&&t.name&&(this._variableHandles.get(t.variablesReference)==="globals"?(e.body.dataId=t.name,e.body.description=t.name,e.body.accessTypes=["write"],e.body.canPersist=!0):(e.body.dataId=t.name,e.body.description=t.name,e.body.accessTypes=["read","write","readWrite"],e.body.canPersist=!0)),this.sendResponse(e)}setDataBreakpointsRequest(e,t){this._runtime.clearAllDataBreakpoints(),e.body={breakpoints:[]};for(let n of t.breakpoints){let r=this._runtime.setDataBreakpoint(n.dataId,n.accessType||"write");e.body.breakpoints.push({verified:r})}this.sendResponse(e)}completionsRequest(e,t){e.body={targets:[{label:"item 10",sortText:"10"},{label:"item 1",sortText:"01",detail:"detail 1"},{label:"item 2",sortText:"02",detail:"detail 2"},{label:"array[]",selectionStart:6,sortText:"03"},{label:"func(arg)",selectionStart:5,selectionLength:3,sortText:"04"}]},this.sendResponse(e)}cancelRequest(e,t){t.requestId&&this._cancellationTokens.set(t.requestId,!0),t.progressId&&(this._cancelledProgressId=t.progressId)}disassembleRequest(e,t){let n=parseInt(t.memoryReference),r=t.instructionOffset||0,i=t.instructionCount,o=t.memoryReference.startsWith("0x"),a=o?t.memoryReference.length-2:t.memoryReference.length,u=this.createSource(this._runtime.sourceFile),l=-1,m=this._runtime.disassemble(n+r,i).map(d=>{let R=d.address.toString(o?16:10).padStart(a,"0"),y={address:o?`0x${R}`:`${R}`,instruction:d.instruction};return d.line!==void 0&&l!==d.line&&(l=d.line,y.location=u,y.line=this.convertDebuggerLineToClient(d.line)),y});e.body={instructions:m},this.sendResponse(e)}setInstructionBreakpointsRequest(e,t){this._runtime.clearInstructionBreakpoints();let n=t.breakpoints.map(r=>{let i=parseInt(r.instructionReference),o=r.offset||0;return{verified:this._runtime.setInstructionBreakpoint(i+o)}});e.body={breakpoints:n},this.sendResponse(e)}customRequest(e,t,n){e==="toggleFormatting"?(this._valuesInHex=!this._valuesInHex,this._useInvalidatedEvent&&this.sendEvent(new f.InvalidatedEvent(["variables"])),this.sendResponse(t)):super.customRequest(e,t,n)}convertToRuntime(e){if(e=e.trim(),e==="true")return!0;if(e==="false")return!1;if(e[0]==="'"||e[0]==='"')return e.substr(1,e.length-2);let t=parseFloat(e);return isNaN(t)?e:t}convertFromRuntime(e){let t={name:e.name,value:"???",type:typeof e.value,variablesReference:0,evaluateName:"$"+e.name};if(e.name.indexOf("lazy")>=0)t.value="lazy var",e.reference??(e.reference=this._variableHandles.create(new N("",[new N("",e.value)]))),t.variablesReference=e.reference,t.presentationHint={lazy:!0};else if(Array.isArray(e.value))t.value="Object",e.reference??(e.reference=this._variableHandles.create(e)),t.variablesReference=e.reference;else switch(typeof e.value){case"number":Math.round(e.value)===e.value?(t.value=this.formatNumber(e.value),t.__vscodeVariableMenuContext="simple",t.type="integer"):(t.value=e.value.toString(),t.type="float");break;case"string":t.value=`"${e.value}"`;break;case"boolean":t.value=e.value?"true":"false";break;default:t.value=typeof e.value;break}return e.memory&&(e.reference??(e.reference=this._variableHandles.create(e)),t.memoryReference=String(e.reference)),t}formatAddress(e,t=8){return this._addressesInHex?"0x"+e.toString(16).padStart(8,"0"):e.toString(10)}formatNumber(e){return this._valuesInHex?"0x"+e.toString(16):e.toString(10)}createSource(e){return new f.Source((0,_n.basename)(e),this.convertDebuggerPathToClient(e),void 0,void 0,"mock-adapter-data")}},$e=G;$e.threadID=1;function kn(s,e){s.subscriptions.push(v.commands.registerCommand("extension.mock-debug.runEditorContents",n=>{let r=n;!r&&v.window.activeTextEditor&&(r=v.window.activeTextEditor.document.uri),r&&v.debug.startDebugging(void 0,{type:"mock",name:"Run File",request:"launch",program:r.fsPath},{noDebug:!0})}),v.commands.registerCommand("extension.mock-debug.debugEditorContents",n=>{let r=n;!r&&v.window.activeTextEditor&&(r=v.window.activeTextEditor.document.uri),r&&v.debug.startDebugging(void 0,{type:"mock",name:"Debug File",request:"launch",program:r.fsPath,stopOnEntry:!0})}),v.commands.registerCommand("extension.mock-debug.toggleFormatting",n=>{let r=v.debug.activeDebugSession;r&&r.customRequest("toggleFormatting")})),s.subscriptions.push(v.commands.registerCommand("extension.mock-debug.getProgramName",n=>v.window.showInputBox({placeHolder:"Please enter the name of a markdown file in the workspace folder",value:"readme.md"})));let t=new Ln;s.subscriptions.push(v.debug.registerDebugConfigurationProvider("mock",t)),s.subscriptions.push(v.debug.registerDebugConfigurationProvider("mock",{provideDebugConfigurations(n){return[{name:"Dynamic Launch",request:"launch",type:"mock",program:"${file}"},{name:"Another Dynamic Launch",request:"launch",type:"mock",program:"${file}"},{name:"Mock Launch",request:"launch",type:"mock",program:"${file}"}]}},v.DebugConfigurationProviderTriggerKind.Dynamic)),e||(e=new Dn),s.subscriptions.push(v.debug.registerDebugAdapterDescriptorFactory("mock",e)),"dispose"in e&&s.subscriptions.push(e),s.subscriptions.push(v.languages.registerEvaluatableExpressionProvider("markdown",{provideEvaluatableExpression(n,r){let i=/\$[a-z][a-z0-9]*/ig,o=n.lineAt(r.line).text,a;for(;a=i.exec(o);){let u=new v.Range(r.line,a.index,r.line,a.index+a[0].length);if(u.contains(r))return new v.EvaluatableExpression(u)}}})),s.subscriptions.push(v.languages.registerInlineValuesProvider("markdown",{provideInlineValues(n,r,i){let o=[];for(let l=r.start.line;l<=i.stoppedLocation.end.line;l++){let m=n.lineAt(l);var a=/\$([a-z][a-z0-9]*)/ig;do{var u=a.exec(m.text);if(u){let d=u[1],R=new v.Range(l,u.index,l,u.index+d.length);o.push(new v.InlineValueVariableLookup(R,d,!1))}}while(u)}return o}}))}var Ln=class{resolveDebugConfiguration(e,t,n){if(!t.type&&!t.request&&!t.name){let r=v.window.activeTextEditor;r&&r.document.languageId==="markdown"&&(t.type="mock",t.name="Launch",t.request="launch",t.program="${file}",t.stopOnEntry=!0)}return t.program?t:v.window.showInformationMessage("Cannot find a program to debug").then(r=>{})}},ys={isWindows:!1,async readFile(s){let e;try{e=Pn(s)}catch{return new TextEncoder().encode(`cannot read '${s}'`)}return await v.workspace.fs.readFile(e)},async writeFile(s,e){await v.workspace.fs.writeFile(Pn(s),e)}};function Pn(s){try{return v.Uri.file(s)}catch{return v.Uri.parse(s)}}var Dn=class{createDebugAdapterDescriptor(e){return new v.DebugAdapterInlineImplementation(new $e(ys))}};function Rs(s){kn(s)}function Es(){}
/*! https://mths.be/punycode v1.3.2 by @mathias */
